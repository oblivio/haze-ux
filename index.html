<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Haze | off the record...</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <script src="js/vendor/jquery.2.1.4.js"></script>
        <link rel="stylesheet" href="css/furtive.min.css">
		<script src="js/vendor/rivets.min.js?#"></script>
		<script src="phonegap.js"></script>
        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="js/vendor/load-image.all.min.js"></script>
        <script src="js/vendor/sjcl.js?#"></script>
        <script src="js/ghostpixels/vendor/rsvp.min.js?#"></script>
        <script src="js/ghostpixels/ghostpixels.js?#"></script>
		<script src="js/vendor/base64.js?#"></script>
		<script src="js/vendor/rawdeflate.js?#"></script>
		<script src="js/vendor/rawinflate.js?#"></script>      
    	<script src="js/identicon.js/pnglib.js?#"></script>
		<script src="js/identicon.js/identicon.js?#"></script>
    	<script src="js/vendor/moment.js"></script>
    	<link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
    	<link href='https://fonts.googleapis.com/css?family=Titillium+Web:700' rel='stylesheet' type='text/css'>
    	
    	<style>
 .rvmodal{
 	width:100%;
 	display:none;
 	border-bottom:1rem solid black;
 	
 }
 .rvmodal .modal-content{
 	width:75%;
 	margin:0 auto;
 }
 .rvmodal .rvmodal-close{
 	background-color: rgba(0,0,0,0.5);
width: 15rem;
height: 3rem;
letter-spacing: 10px;
font-size: 1rem;
 }
 .rvmodal .rvmodal-submit{
 background-color: rgba(85, 210, 85, 0.7);
width: auto;
height: 3rem;
letter-spacing: 10px;
font-size: 1rem;
padding: 1%;
float: right;
 }
 .rvmodal .rvmodal-negative{
 background-color: rgba(210, 85, 85, 0.7);
width: auto;
height: 3rem;
letter-spacing: 10px;
font-size: 1rem;
padding: 1%;
float: right;
 }
  .rvmodal .rvmodal-info{
 background-color: rgba(100, 185, 255, 0.7);
width: auto;
height: 3rem;
letter-spacing: 10px;
font-size: 1rem;
padding: 1%;
float: right;
 }
  .rvmodal .rvmodal-warning{
 background-color: rgba(255, 85, 0, 0.7);
width: auto;
height: 3rem;
letter-spacing: 10px;
font-size: 1rem;
padding: 1%;
float: right;
 }
 .rvmodal .rvmodal-close:after{
 	content:"close";
 }
    	</style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="header-container">
            <header class="wrapper clearfix">
                <h1 class="title">haze</h1>
                <nav>
                <ul>
	                <li><a id="openloadmodal" ><img src="flaticon/svg/feed3.svg"/></a></li>
   	                <li><a id="loadblackbook-button"  ><img src="flaticon/svg/visualization.svg"/></a></li>
	                <li><a id="openaddmodal"><img src="flaticon/svg/add20.svg"/></a></li>
	                <li><a id="opensettingsmodal" ><img src="flaticon/svg/three115.svg"/></a></li>
	            </ul>
                </nav>
            </header>
        </div>
        

        <div class="main-container oblivious-home rvmodal-bg">
            <div class="main wrapper clearfix">
			<div id="modals" class="grd small">
<div class="grd-row">
		<div id="rvmod-invite" class="rvmodal" data-rvmodal-id="invitemodal">
  <button data-rvmodal-action="close" class="rvmodal-close"></button>
  <div class="modal-content">
  	<h3>Generate Invite</h3>
				<hr />
					<label for="invite-pwd">Password*:</label>
					<input id="invite-pwd" type="text" placeholder="(Required)" class="full-width" />
			      <input type="text" class="full-width" id="encodedinvite" placeholder="encodedinvite" />
			      <hr />
			      <a id="invite-image" href="" download="invite.png"><img src="" /></a>
  </div>
  <button data-rvmodal-action="submit" id="send-invite-button" class="rvmodal-submit">Generate Invite</button>
  
</div>
<div id="rvmod-alias" class="rvmodal" data-rvmodal-id="aliasmodal">
  <button data-rvmodal-action="close" class="rvmodal-close"></button>
  <div class="modal-content">
  	<h3>Set Entry Alias</h3>
				<hr />
					<label for="entry-original-id">EntryID:</label>
					<input id="entry-original-id" type="text" disabled />
					<label for="entry-original-cat">Category:</label>
					<input id="entry-original-cat" type="text" disabled />
					<hr />
					<label for="entry-alias-input">Alias for Entry*:</label>
					<input id="entry-alias-input" type="text" placeholder="(Enter Name)" class="full-width" />
			      
  </div>
  <button data-rvmodal-action="submit" id="set-entry-alias-button" class="rvmodal-submit">Set</button>
  
</div>
<div id="rvmod-generic" class="rvmodal" data-rvmodal-id="genericmodal">
  <button data-rvmodal-action="close" class="rvmodal-close"></button>
  <div class="modal-content">
  	<h3 class="generic-msg">Message goes here</h3>
				<hr />
  </div>
</div>


<div id="subnav-home" class="rvmodal" data-rvmodal-id="loadmodal">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<h3>Choose Category</h3>
						<hr />
			<div rv-if="oblivious_data.subnav.categories">
  						
                	    <div id="category-container">
                	    	<select  rv-on-change="oblivious_data.subnav.travel"	 id="current-category">
                	    		<option class="category-btn btn btn--s full-width">(choose a category)</option>
                	    		<option rv-each-category="oblivious_data.subnav.content" class="category-btn btn btn--s full-width">{category}</option>
                	    	</select>
                		</div>
                		<hr />
                		
                	</div>
		  </div>
		</div>
		
		
<div id="rvmod-settingsmodal" class="rvmodal" data-rvmodal-id="settings">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<h3>Blackbook Settings</h3>
			<hr />
               			
		  </div>
		  <button id="clear-blackbook-button" data-cleartype="all" data-rvmodal-action="negative" class="rvmodal-negative">Clear</button>
		</div>
		
		<div id="rvmod-addhub" class="rvmodal" data-rvmodal-id="addhub">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<h3>Add new entry...</h3>
			<hr />
               			
		  </div>
		  <button id="showinvitemodal-btn" data-rvmodal-action="warning" class="rvmodal-warning">Existing Entry</button>
				  <button id="showaddnewmodal-btn" data-rvmodal-action="info" class="rvmodal-info">New Entry</button>
		
		</div>
		
<div id="rvmod-invitemodal" class="rvmodal" data-rvmodal-id="invitesection">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<div class="" id="">
                <h3>Have an invite?</h3>
                <p style="display:none;" id="invite-status">Successfully processed invite! <a class="btn--red dismiss-button">dismiss</a></p>
                
                	<form id="inviteform" action="#" role="form" class="my2">
                		<label for="inviteinput">Enter Invite</label>
                		<input type="text" id="encodedinvite-input" class="full-width" />
                		<div id="invite-action">
                			
                		<input id="decode-input" class="" type=file accept="image/*;capture=camera">	
                		</div>
                	</form>
                <hr />	
                </div>	
		  </div>
		  <button id="submit-invite-button"  data-rvmodal-action="submit" class="rvmodal-submit">Submit Invite</button>
		</div>
	
		<div id="rvmod-addnewmodal" class="rvmodal" data-rvmodal-id="addmodal">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<h3>Add Entry</h3>
						<hr />
						<div id="oblivious_addentry">
                
                 <div class="" id="">
					      <form id="addentryform" action="#" role="form" class="my2">
					      	<img class="add-image-button" src="flaticon/svg/picture56.svg" alt="oblivious entry"> 
					      	<input id="addimage-input" type=file accept="image/*;capture=camera">				      	
					      	<hr />
					        <label class="clientsidecrypto" for="crypto">Client-Side Crypto</label>
					        <input rv-on-change="viewdata.togglecrypto" class="clientsidecrypto" name="crypto" type="checkbox" />
					        
					        <label for="password">Password</label>
					        <input 	rv-on-change="viewdata.setAddProperty" id="entry-password" name="password" placeholder="Enter password" type="password">
					        <label for="msg">Message</label>
					        <textarea 	rv-on-change="viewdata.setAddProperty" id="entry-text" name="msg" rows="3" placeholder="Entry contents..."></textarea>
					        <label for="expiration">Expiration</label>
					        <select	rv-on-change="viewdata.setAddProperty" name="expiration" id="entry-expiration">
					        	<option value="never">Never</option>
					        	<option value="burnafter">Burn After Reading</option>
					        	<option value="5min">5 minutes</option>
					        	<option value="10min">10 minutes</option>
					        	<option value="1hour">1 hour</option>
					        	<option value="1day">1 day</option>
					        	<option value="1week">1 week</option>
					        	<option value="1month">1 month</option>
					        	<option value="1year">1 year</option>
					        </select>
					        <label for="metadata">Meta-Data</label>
					        <input id="metadata_entry" type="text" name="metadata" class="full-width" />
					        <textarea id="metadata_preview" disabled=true rows=3 placeholder="Entry MetaData JSON"></textarea>
					        <label for="category">
					        	Choose a Category
					        </label>
					        <select	rv-on-change="viewdata.setAddProperty" id="addentry-category">
                	    		<option class="category-btn btn btn--s full-width">(choose a category)</option>
                	    		<option rv-each-category="viewdata.categories" class="category-btn btn btn--s full-width">{category}</option>
                	    	</select>
                	    	<hr />
					      </form>
					    </div>   
                </div>
               
		  </div>
		  <button id="submit-entry-button" data-rvmodal-action="submit" class="rvmodal-submit">Submit Entry</button>
		  
		</div>


<div id="rvmod-addcomment" class="rvmodal" data-rvmodal-id="modal">
		  <button data-rvmodal-action="close" class="rvmodal-close"></button>
		  <div class="modal-content">
		  	<h3>Add Comment</h3>
						<hr />
					
					      <form id="addcommentform" action="#" role="form" class="my2">
					      	<img class="add-image-button" src="flaticon/svg/picture56.svg" alt="oblivious entry"> 
					      	<input id="addimage-input-comment" type=file accept="image/*;capture=camera">				      	
					      	<hr /><label for="msg">Message</label>
					        <textarea 	rv-on-change="" id="comment-text" name="msg" rows="3" placeholder="New comment..."></textarea>
					        
					      </form>
		  </div>
		  <button data-rvmodal-action="submit" class="rvmodal-submit" id="send-comment-button">Send Comment</button>
		</div>


</div>
			</div>
			<div id="oblivious_entrylist" class="grd small">
				
		        <div class="grd-row my1 mx1">
		        	<div rv-if="oblivious_data.subnav.active">
		        		<h3>{oblivious_data.subnav.active}</h3>
		        		<hr />
		        	</div>
		        	
		        	<div id="instructions" rv-if="oblivious_data.freshload">
		        		<h3>Welcome to haze.</h3>
		        		<h5>Off the record communication platform</h5>
		        		<hr />
	     				<p><b>Public Feed</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/feed3.svg">
	     				
	     					<br />
	     					The public feed let's you see all public posts.
	     				</p>
	     				<p><b>Blackbook</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/visualization.svg">
	     				
	     					<br />
	     					The Blackbook keeps track of your oblivious entries.
	     				</p>
	     				<p><b>Add Entry</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/add20.svg">
	     				
	     					<br />
							Create a new oblivious entry.
	     				</p>
	     				<p><b>Settings</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/three115.svg">
	     				
	     					<br />
	     					Let's users configure their 'Blackbook'.
	     				</p>
		        	</div>
		        </div>
		        <div class="grd-row my1 mx2">
		          <div rv-each-entry="oblivious_data.entries" class="grd-row-col-1-4 listed-entry py1 my1 mx1 px1" >
		            <div rv-class="entry.category">
		            <div class="heading">
		            		<span rv-if="entry.blackbook" class="title">{entry.visiblename}</span>
		            		<hr />
					        <span class="title">{entry.entryid}</span>
					</div>
					<div rv-id="entry.entryid" class="content oblivious-entry-button ">
	                    		<span  class="icon-holder">
	                    				<img rv-if="entry.meta.burnafterreading" src="flaticon/svg/fire14.svg" alt="oblivious entry">
	                    		
	                    				<img rv-if="entry.meta.containsimage" src="flaticon/svg/picture56.svg" alt="oblivious entry">
	                    				<img rv-if="entry.meta.opendiscussion" src="flaticon/svg/chat78.svg" alt="oblivious entry"> 
	                    				<img rv-if="entry.meta.encrypted" src="flaticon/svg/locked43.svg" alt="oblivious entry">
	                    				<img rv-if="entry.meta.krypi" src="flaticon/svg/login13.svg" alt="oblivious entry">			
										<img rv-if="entry.meta.unencrypted" src="flaticon/svg/open99.svg" alt="oblivious entry">					                	
	                    			</span>
									
					    </div>
					    <div id="entry-actions">
       	                    			<a rv-if="oblivious_data.showinvite" rv-eid="entry.entryid" rv-ecat="entry.category" href="" id="" class="invite-button btn btn--s floated-right full-width">Invite</a>
                    				 	<a rv-eid="entry.entryid" class="oblivious-entry-button btn btn--s btn--green floated-right full-width">View</a>
                    		<a rv-eid="entry.entryid"  rv-ecat="entry.category" class="alias-button btn btn--s btn--blue floated-right full-width">Alias</a>
                    		
									</div>
					</div>
		          </div>
		        </div>
		      </div>
			
			
			
			
                
                <article style="display:none;" id="oblivious_viewentry">
                	<section>
                	
                	<a id="return-to-entries" class="category-btn btn btn--s full-width">Back to Entries</a>
                    <div class="oblivious-view-entry">
                    	<div rv-each-entry="oblivious_viewentry_data.entries"  class="">
                    		<h6 class="">{entry.category}:{entry.entryid}</h6>
                    		
                    		<hr />

                    		<a rv-eid="entry.entryid" href="" rv-if="entry.meta.opendiscussion"  id="" class="add-comment-button btn--blue btn--s">Add Comment</a>
				                	<a  rv-if="oblivious_data.showinvite" rv-eid="entry.entryid" rv-ecat="entry.category" href="#invitemodal" id="" class="invite-button btn btn--s  full-width">Invite</a>
				                	<span  class="icon-holder floated-right">
                    				<img rv-if="entry.meta.containsimage" src="flaticon/svg/picture56.svg" alt="oblivious entry">
                    				<img rv-if="entry.meta.burnafterreading" src="flaticon/svg/fire14.svg" alt="oblivious entry">
                    				
                    				<img rv-if="entry.meta.opendiscussion" src="flaticon/svg/chat78.svg" alt="oblivious entry"> 
                    				<img rv-if="entry.meta.encrypted" src="flaticon/svg/locked43.svg" alt="oblivious entry">
                    				<img rv-if="entry.meta.krypi" src="flaticon/svg/login13.svg" alt="oblivious entry">			
									<img rv-if="entry.meta.unencrypted" src="flaticon/svg/open99.svg" alt="oblivious entry">
									
									
                    		</span>
				                	<hr />
                    		<textarea style="display:none;" id="view-entry-meta" class="view-entry-meta full-width" disabled="disabled" rows=10>
                    		
                    		</textarea>
                    	</div>
                    	<div class="processed-entry-contents">
                    		<div rv-each-econtent="oblivious_viewentry_data.contents" class="entry-content-container">
                    			<a  rv-if="econtent.image" rv-href="econtent.image" download="oblivious.png">
                    				<img rv-if="econtent.image" rv-src="econtent.image"  class="processed-entry-image" />
                    			</a>
                    			<hr />
                    			<p rv-if="econtent.text">{econtent.text}
                    			                    				<img rv-if="econtent.identicon" rv-src="econtent.identicon"  class="processed-entry-identicon" />
                    			
                    			</p>
                    			<p rv-if="econtent.createdate">{econtent.createdate}</p>
                    			<p rv-if="econtent.expiretime">{econtent.expiretime}</p>
                    			<a  rv-if="econtent.identicon" rv-href="econtent.identicon" rv-download="entry.entryid">
                    			</a>
                    		</div>
                    	</div>
                    </div>
                    </section>
                </article>

               
                

            </div> <!-- #main -->
        </div> <!-- #main-container -->
        
        <div class="footer-container">
            <footer class="wrapper">
                <h3 class="title">Haze</h3>
                <p>Haze is built on oblivious - which is open-source software released under <a href="http://www.gnu.org/licenses/gpl-3.0.en.html">GPLV3</a>. Developed by <a href="http://www.fabian-valle.com">Fabian Valle</a>. Source code available on <a href="https://github.com/oblivio/oblivious">Github</a>.
                || Icons made by <a href="http://www.flaticon.com/authors/yannick" title="Yannick">Yannick</a>, <a href="http://www.flaticon.com/authors/icomoon" title="Icomoon">Icomoon</a>, <a href="http://www.flaticon.com/authors/appzgear" title="Appzgear">Appzgear</a>, <a href="http://www.freepik.com" title="Freepik">Freepik</a>, <a href="http://www.flaticon.com/authors/alessio-atzeni" title="Alessio Atzeni">Alessio Atzeni</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a>
                </p>
                
            </footer>
        </div>
		    	<script src="js/vendor/blockui.js"></script>
		
        <script src="js/main.js"></script>
		<script src="js/all.js"></script>
		
		<script>
		
		
       //rvmod-invite
       //id="rvmod-addcomment" 
      
        	$("#openloadmodal").on("click",function(e){
        		e.preventDefault();
        		 $("html, body").animate({ scrollTop: 0 }, "slow");
        		$(".rvmodal").fadeOut();
            	$("#subnav-home").fadeIn();
            });
        	$("#openaddmodal").on("click",function(e){
				e.preventDefault();
				 $("html, body").animate({ scrollTop: 0 }, "slow");
				$(".rvmodal").fadeOut();
	        	$("#rvmod-addhub").fadeIn();
	        });
        	$("#showinvitemodal-btn").on("click",function(e){
				e.preventDefault();
				 $("html, body").animate({ scrollTop: 0 }, "slow");
				$(".rvmodal").fadeOut();
	        	$("#rvmod-invitemodal").fadeIn();
	        });
        	
        	$("#showaddnewmodal-btn").on("click",function(e){
				e.preventDefault();
				 $("html, body").animate({ scrollTop: 0 }, "slow");
				$(".rvmodal").fadeOut();
	        	$("#rvmod-addnewmodal").fadeIn();
	        });
        	$("#opensettingsmodal").on("click",function(e){
        		e.preventDefault();
        		 $("html, body").animate({ scrollTop: 0 }, "slow");
				$(".rvmodal").fadeOut();
	        	$("#rvmod-settingsmodal").fadeIn();
            });
			$(".rvmodal-close").on("click",function(e){
	        	$(this).parent().hide();
	        	 $("html, body").animate({ scrollTop: 0 }, "slow");
	        });
		
		
		document.addEventListener("deviceready", onDeviceReady, false);
		function onDeviceReady() {
			var jqxhr = $.ajax({
		        "method": "GET",
		        "url": "http://www.hazedaily.com/api/list/categories/",
		        contentType: "application/json",  
		        dataType: 'jsonp',  
		       	crossDomain: true,
		       	success : function(data) {
                    //alert(data);
                },
		        error: function (jqXHR, textStatus, errorThrown) {
					alert("error");
		            alert('new textStatus=' + textStatus + ' errorThrown=' + errorThrown);
		        }
			});
			
		    $(document).on('click', 'img.processed-entry-image', function(event) {
		        event.preventDefault();
		        var tmpSRC = $(this).attr('src');
		        
		        var canvas = canvas = document.createElement('canvas');
		    	canvas.width = GhostPixels.dimensions.width;
		    	canvas.height = GhostPixels.dimensions.height;
		    	var img = new Image();
		        img.onload = function() {
		            var ctx = canvas.getContext('2d');
		            ctx.canvas.width = img.width;
		            ctx.canvas.height = img.height;
		            ctx.drawImage(img, 0, 0);
		            
		            window.canvas2ImagePlugin.saveImageDataToLibrary(
			                function(msg){
			                    alert('File has been saved to gallery.');
			                },
			                function(err){
			                    alert('File could not be saved to gallery.');
			                },
			                canvas
			            );
		        };
		        img.src = tmpSRC;
		        
		    });
		}; //end onDeviceReady
		</script>
    </body>
</html>
        