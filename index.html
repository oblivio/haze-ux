<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Haze | off the record...</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <script src="js/vendor/jquery.2.1.4.js"></script>
        <link rel="stylesheet" href="css/furtive.min.css">
		<script src="js/vendor/rivets.min.js?#"></script>
		<script src="phonegap.js"></script>
        <link rel="stylesheet" href="css/normalize.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="js/vendor/load-image.all.min.js"></script>
        <script src="js/vendor/sjcl.js?#"></script>
        <script src="js/ghostpixels/vendor/rsvp.min.js?#"></script>
        <script src="js/ghostpixels/ghostpixels.js?#"></script>
		<script src="js/vendor/base64.js?#"></script>
		<script src="js/vendor/rawdeflate.js?#"></script>
		<script src="js/vendor/rawinflate.js?#"></script>      
    	<script src="js/identicon.js/pnglib.js?#"></script>
		<script src="js/identicon.js/identicon.js?#"></script>
    	<script src="js/vendor/moment.js"></script>
    	<link rel="stylesheet" href="js/remodal/remodal.css">
		<link rel="stylesheet" href="js/remodal/remodal-default-theme.css">
    	<script src="js/remodal/remodal.min.js"></script>
    	<link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
    	<link href='https://fonts.googleapis.com/css?family=Titillium+Web:700' rel='stylesheet' type='text/css'>
    	
    	<style>
 
    	</style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="header-container">
            <header class="wrapper clearfix">
                <h1 class="title">haze | off the record...</h1>
                <nav>
                <ul>
	                <li><a href="#loadmodal"><img src="flaticon/svg/feed3.svg"/></a></li>
   	                <li><a id="loadblackbook-button"  ><img src="flaticon/svg/visualization.svg"/></a></li>
	                <li><a href="#addmodal"><img src="flaticon/svg/add20.svg"/></a></li>
	                <li><a href="#settings"><img src="flaticon/svg/three115.svg"/></a></li>
	            </ul>
                </nav>
            </header>
        </div>
        

        <div class="main-container oblivious-home remodal-bg">
            <div class="main wrapper clearfix">
			
			<div id="oblivious_entrylist" class="grd small">
		        <div class="grd-row my1">
		        	<div rv-if="oblivious_data.subnav.active">
		        		<h3>{oblivious_data.subnav.active}</h3>
		        		<hr />
		        	</div>
		        	<div id="instructions" rv-if="oblivious_data.freshload">
		        		<h3>Welcome to haze.</h3>
		        		<h5>Off the record communication platform</h5>
		        		<hr />
	     				<p><b>Public Feed</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/feed3.svg">
	     				
	     					<br />
	     					The public feed let's you see all public posts.
	     				</p>
	     				<p><b>Blackbook</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/visualization.svg">
	     				
	     					<br />
	     					The Blackbook keeps track of your oblivious entries.
	     				</p>
	     				<p><b>Add Entry</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/add20.svg">
	     				
	     					<br />
							Create a new oblivious entry.
	     				</p>
	     				<p><b>Settings</b>
	     					     					<img class="instructions-image floated-right" src="flaticon/svg/three115.svg">
	     				
	     					<br />
	     					Let's users configure their 'Blackbook'.
	     				</p>
		        	</div>
		        </div>
		        <div class="grd-row my1">
		          <div rv-each-entry="oblivious_data.entries" class="grd-row-col-1-4 listed-entry py1 my1 mx1 px1" >
		            <div rv-class="entry.category">
		            <div class="heading">
					        <span class="title">{entry.entryid}</span>
					</div>
					<div rv-id="entry.entryid" class="content oblivious-entry-button ">
	                    		<span  class="icon-holder">
	                    				<img rv-if="entry.meta.burnafterreading" src="flaticon/svg/fire14.svg" alt="oblivious entry">
	                    		
	                    				<img rv-if="entry.meta.containsimage" src="flaticon/svg/picture56.svg" alt="oblivious entry">
	                    				<img rv-if="entry.meta.opendiscussion" src="flaticon/svg/chat78.svg" alt="oblivious entry"> 
	                    				<img rv-if="entry.meta.encrypted" src="flaticon/svg/locked43.svg" alt="oblivious entry">
	                    				<img rv-if="entry.meta.krypi" src="flaticon/svg/login13.svg" alt="oblivious entry">			
										<img rv-if="entry.meta.unencrypted" src="flaticon/svg/open99.svg" alt="oblivious entry">					                	
	                    			</span>
									
					    </div>
					    <div id="entry-actions">
       	                    			<a rv-if="oblivious_data.showinvite" rv-eid="entry.entryid" rv-ecat="entry.category" href="#invitemodal" id="" class="invite-button btn btn--s floated-right full-width">Invite</a>
                    				 	<a rv-eid="entry.entryid" class="oblivious-entry-button btn btn--s btn--green floated-right full-width">View</a>
                    		
									</div>
					</div>
		          </div>
		        </div>
		      </div>
			
			
			
			
                
                <article style="display:none;" id="oblivious_viewentry">
                	<section>
                	
                	<a id="return-to-entries" class="category-btn btn btn--s full-width">Back to Entries</a>
                    <div class="oblivious-view-entry">
                    	<div rv-each-entry="oblivious_viewentry_data.entries"  class="">
                    		<h6 class="">{entry.category}:{entry.entryid}</h6>
                    		
                    		<hr />
                    		<a rv-eid="entry.entryid" href="#modal" rv-if="entry.meta.opendiscussion"  id="" class="oblivious-entry-button add-comment-button btn--blue btn--s">Add Comment</a>
				                	<a  rv-if="oblivious_data.showinvite" rv-eid="entry.entryid" rv-ecat="entry.category" href="#invitemodal" id="" class="invite-button btn btn--s  full-width">Invite</a>
				                	<span  class="icon-holder floated-right">
                    				<img rv-if="entry.meta.containsimage" src="flaticon/svg/picture56.svg" alt="oblivious entry">
                    				<img rv-if="entry.meta.burnafterreading" src="flaticon/svg/fire14.svg" alt="oblivious entry">
                    				
                    				<img rv-if="entry.meta.opendiscussion" src="flaticon/svg/chat78.svg" alt="oblivious entry"> 
                    				<img rv-if="entry.meta.encrypted" src="flaticon/svg/locked43.svg" alt="oblivious entry">
                    				<img rv-if="entry.meta.krypi" src="flaticon/svg/login13.svg" alt="oblivious entry">			
									<img rv-if="entry.meta.unencrypted" src="flaticon/svg/open99.svg" alt="oblivious entry">
									
									
                    		</span>
				                	<hr />
                    		<textarea id="view-entry-meta" class="view-entry-meta full-width" disabled="disabled" rows=10>
                    		
                    		</textarea>
                    	</div>
                    	<div class="processed-entry-contents">
                    		<div rv-each-econtent="oblivious_viewentry_data.contents" class="entry-content-container">
                    			<a  rv-if="econtent.image" rv-href="econtent.image" download="oblivious.png">
                    				<img rv-if="econtent.image" rv-src="econtent.image"  class="processed-entry-image" />
                    			</a>
                    			<hr />
                    			<p rv-if="econtent.text">{econtent.text}</p>
                    			<p rv-if="econtent.createdate">{econtent.createdate}</p>
                    			<p rv-if="econtent.expiretime">{econtent.expiretime}</p>
                    			<a  rv-if="econtent.identicon" rv-href="econtent.identicon" rv-download="entry.entryid">
                    				<img rv-if="econtent.identicon" rv-src="econtent.identicon"  class="processed-entry-identicon" />
                    			</a>
                    		</div>
                    	</div>
                    </div>
                    </section>
                </article>

               
                

            </div> <!-- #main -->
        </div> <!-- #main-container -->
        <div class="remodal" data-remodal-id="modal">
		  <button data-remodal-action="close" class="remodal-close"></button>
		  <div class="modal-content">
		  	<h3>Add Comment</h3>
						<hr />
					
					      <form id="addcommentform" action="#" role="form" class="my2">
					      	<img class="add-image-button" src="flaticon/svg/picture56.svg" alt="oblivious entry"> 
					      	<input id="addimage-input-comment" type=file accept="image/*;capture=camera">				      	
					      	<hr /><label for="msg">Message</label>
					        <textarea 	rv-on-change="" id="comment-text" name="msg" rows="3" placeholder="New comment..."></textarea>
					        
					      </form>
		  </div>
		  <button data-remodal-action="cancel" class="remodal-cancel">Cancel</button>
		  <button data-remodal-action="confirm" class="remodal-confirm" id="send-comment-button">Send</button>
		</div>
		<div class="remodal" data-remodal-id="invitemodal">
		  <button data-remodal-action="close" class="remodal-close"></button>
		  <div class="modal-content">
		  	<h3>Generate Invite</h3>
						<hr />
							<label for="invite-pwd">Password*:</label>
							<input id="invite-pwd" type="text" placeholder="(Required)" class="full-width" />
					      <input type="text" class="full-width" id="encodedinvite" placeholder="encodedinvite" />
					      <button id="send-invite-button" class="btn--green full-width">Generate Invite</button>
					      <hr />
					      <a id="invite-image" href="" download="invite.png"><img src="" /></a>
		  </div>
		  <button data-remodal-action="cancel" class="remodal-cancel full-width">Close</button>
		</div>
		<div id="subnav-home" class="remodal" data-remodal-id="loadmodal">
		  <button data-remodal-action="close" class="remodal-close"></button>
		  <div class="modal-content">
		  	<h3>Choose Category</h3>
						<hr />
			<div rv-if="oblivious_data.subnav.categories">
  						
                	    <div id="category-container">
                	    	<select  rv-on-change="oblivious_data.subnav.travel"	 id="current-category">
                	    		<option class="category-btn btn btn--s full-width">(choose a category)</option>
                	    		<option rv-each-category="oblivious_data.subnav.content" class="category-btn btn btn--s full-width">{category}</option>
                	    	</select>
                		</div>
                		<hr />
                		
                	</div>
		  </div>
		  <button data-remodal-action="cancel" class="remodal-cancel full-width">Close</button>
		</div>
		<div class="remodal" data-remodal-id="settings">
		  <button data-remodal-action="close" class="remodal-close"></button>
		  <div class="modal-content">
		  	<h3>Settings</h3>
			<hr />
			<article id="blackbook_management">
			 		<section class="measure p2">
			 			<h3>Blackbook</h3>
			 			<a id="clear-blackbook-button" data-cleartype="all" class="category-btn btn btn--red full-width">
               				Clear Blackbook
               			</a>
               			
			 		</section>
			 	</article>
		  </div>
		  <button data-remodal-action="cancel" class="remodal-cancel full-width">Close</button>
		</div>
		<div class="remodal" data-remodal-id="addmodal">
		  <button data-remodal-action="close" class="remodal-close"></button>
		  <div class="modal-content">
		  	<h3>Add Entry</h3>
						<hr />
						<article id="oblivious_addentry">
                <section class="" id="">
                <h5>Have an invite?</h5>
                <p style="display:none;" id="invite-status">Successfully processed invite! <a class="btn--red dismiss-button">dismiss</a></p>
                
                	<form id="inviteform" action="#" role="form" class="my2">
                		<label for="inviteinput">Enter Invite</label>
                		<input type="text" id="encodedinvite-input" class="full-width" />
                		<div id="invite-action">
                			
                		<input id="decode-input" class="" type=file accept="image/*;capture=camera">				      	
                		<input id="submit-invite-button" value="Submit Invite" class="btn--blue" type="button">
                		</div>
                	</form>
                <hr />	
                </section>
                 <section class="" id="">
					      <h5>Create Entry</h5>
						<hr />
					
					      <form id="addentryform" action="#" role="form" class="my2">
					      	<img class="add-image-button" src="flaticon/svg/picture56.svg" alt="oblivious entry"> 
					      	<input id="addimage-input" type=file accept="image/*;capture=camera">				      	
					      	<hr />
					        <label class="clientsidecrypto" for="crypto">Client-Side Crypto</label>
					        <input rv-on-change="viewdata.togglecrypto" class="clientsidecrypto" name="crypto" type="checkbox" />
					        
					        <label for="password">Password</label>
					        <input 	rv-on-change="viewdata.setAddProperty" id="entry-password" name="password" placeholder="Enter password" type="password">
					        <label for="msg">Message</label>
					        <textarea 	rv-on-change="viewdata.setAddProperty" id="entry-text" name="msg" rows="3" placeholder="Entry contents..."></textarea>
					        <label for="expiration">Expiration</label>
					        <select	rv-on-change="viewdata.setAddProperty" name="expiration" id="entry-expiration">
					        	<option value="never">Never</option>
					        	<option value="burnafter">Burn After Reading</option>
					        	<option value="5min">5 minutes</option>
					        	<option value="10min">10 minutes</option>
					        	<option value="1hour">1 hour</option>
					        	<option value="1day">1 day</option>
					        	<option value="1week">1 week</option>
					        	<option value="1month">1 month</option>
					        	<option value="1year">1 year</option>
					        </select>
					        <label for="metadata">Meta-Data</label>
					        <input id="metadata_entry" type="text" name="metadata" class="full-width" />
					        <textarea id="metadata_preview" disabled=true rows=3 placeholder="Entry MetaData JSON"></textarea>
					        <label for="category">
					        	Choose a Category
					        </label>
					        <select	rv-on-change="viewdata.setAddProperty" id="addentry-category">
                	    		<option class="category-btn btn btn--s full-width">(choose a category)</option>
                	    		<option rv-each-category="viewdata.categories" class="category-btn btn btn--s full-width">{category}</option>
                	    	</select>
                	    	<hr />
					      </form>
					    </section>   
                </article>
               
		  </div>
		  <button id="submit-entry-button" data-remodal-action="confirm" class="remodal-confirm full-width">Submit</button>
		  <button data-remodal-action="cancel" class="remodal-cancel full-width">Close</button>
		</div>
        <div class="footer-container">
            <footer class="wrapper">
                <h3 class="title">Haze</h3>
                <p>Haze is built on oblivious - which is open-source software released under <a href="http://www.gnu.org/licenses/gpl-3.0.en.html">GPLV3</a>. Developed by <a href="http://www.fabian-valle.com">Fabian Valle</a>. Source code available on <a href="https://github.com/oblivio/oblivious">Github</a>.
                || Icons made by <a href="http://www.flaticon.com/authors/yannick" title="Yannick">Yannick</a>, <a href="http://www.flaticon.com/authors/icomoon" title="Icomoon">Icomoon</a>, <a href="http://www.flaticon.com/authors/appzgear" title="Appzgear">Appzgear</a>, <a href="http://www.freepik.com" title="Freepik">Freepik</a>, <a href="http://www.flaticon.com/authors/alessio-atzeni" title="Alessio Atzeni">Alessio Atzeni</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0">CC BY 3.0</a>
                </p>
                
            </footer>
        </div>
		    	<script src="js/vendor/blockui.js"></script>
		
        <script src="js/main.js"></script>
		<script src="js/all.js"></script>
		
		<script>
		document.addEventListener("deviceready", onDeviceReady, false);
		function onDeviceReady() {
			alert('device is ready');
			var jqxhr = $.ajax( "http://www.hazedaily.com/api/list/categories/" )
			  .done(function() {
			    alert( "success" );
			  })
			  .fail(function() {
			    alert( "error" );
			  })
			  .always(function() {
			    alert( "complete" );
			  });
		    $(document).on('click', 'img', function(event) {
		        event.preventDefault();
		        var tmpSRC = $(this).attr('src');
		        
		        var canvas = canvas = document.createElement('canvas');
		    	canvas.width = GhostPixels.dimensions.width;
		    	canvas.height = GhostPixels.dimensions.height;
		    	var img = new Image();
		        img.onload = function() {
		            var ctx = canvas.getContext('2d');
		            ctx.canvas.width = img.width;
		            ctx.canvas.height = img.height;
		            ctx.drawImage(img, 0, 0);
		            
		            window.canvas2ImagePlugin.saveImageDataToLibrary(
			                function(msg){
			                    alert('File has been saved to gallery.');
			                },
			                function(err){
			                    alert('File could not be saved to gallery.');
			                },
			                canvas
			            );
		        };
		        img.src = tmpSRC;
		        
		    });
		}; //end onDeviceReady
		</script>
    </body>
</html>
        